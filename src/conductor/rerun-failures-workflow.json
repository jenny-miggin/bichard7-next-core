[
  {
    "accessPolicy": {},
    "name": "rerun_failures",
    "description": "Compares a batch of failed comparison S3 files against Core",
    "version": 1,
    "tasks": [
      {
        "name": "Loop Task",
        "taskReferenceName": "LoopTask",
        "type": "DO_WHILE",
        "startDelay": 0,
        "optional": false,
        "asyncComplete": false,
        "loopCondition": "$.rerun_failures.nextKey !== null",
        "loopOver": [
          {
            "name": "rerun_failures",
            "taskReferenceName": "rerun_failures",
            "inputParameters": {
              "startKey": "${rerun_failures.output.nextKey}"
            },
            "type": "SIMPLE",
            "startDelay": 0,
            "optional": false,
            "asyncComplete": false
          },
          {
            "name": "start_compare_batch",
            "taskReferenceName": "start_compare_batch",
            "inputParameters": {
              "startWorkflow": {
                "name": "compare_batch",
                "input": {
                  "s3Paths": "${rerun_failures.output.s3Paths}"
                }
              }
            },
            "type": "START_WORKFLOW",
            "startDelay": 0,
            "optional": false,
            "asyncComplete": false
          }
        ]
      }
    ],
    "inputParameters": [],
    "outputParameters": {},
    "schemaVersion": 2,
    "restartable": true,
    "workflowStatusListenerEnabled": false,
    "ownerEmail": "moj-bichard7@madetech.com",
    "timeoutPolicy": "ALERT_ONLY",
    "timeoutSeconds": 0,
    "variables": {},
    "inputTemplate": {}
  }
]
